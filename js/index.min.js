var formatBrowser=function(e){var t=e.browserName;return e.browserVersion&&(t+=" "+e.browserVersion),e.os&&(t+=" on "+e.os),e.osVersion&&(t+=" ("+e.osVersion+")"),e.device&&"Unknown"!=e.device&&"Other"!=e.device&&(t+=", "+e.device),t},formatLocation=function(e){var t=e.ipLocation,o=[];if(t.city&&t.city.name&&o.push(t.city.name),t.subdivisions&&0<t.subdivisions.length)for(var a=0;a<t.subdivisions.length;a++){var n=t.subdivisions[a];n&&n.name&&o.push(n.name)}t.country&&t.country.name&&o.push(t.country.name),t.postalCode&&o.push(t.postalCode);var r=o.join(", ");return t.latitude&&t.longitude&&(r+=" ("+t.latitude+", "+t.longitude+")"),r},showDemo=function(){$("#demo-call").attr("disabled",!0),$("#demo-call-progress").text("In progress..."),FP.send({callbackData:!0}).then(function(e){$("#demo-call").remove(),$(".demo-visitorid").html(e.visitorId),$(".demo-location").html(formatLocation(e)),$(".demo-browser").html(formatBrowser(e)),$(".demo-card").show().get(0).scrollIntoView({behavior:"smooth"}),setTimeout(function(){$(".demo-hint").removeClass("invisible")},4e3)})};$("[data-toggle=modal]").on("click",function(e){var t=$(e.currentTarget).data("source");gtag("event","contact-click",{event_category:"contact",event_label:t})}),$("#contact-modal").on("shown.bs.modal",function(e){setTimeout(function(){$("#contact-website").focus()},300)}),$("#demo-call").on("click",function(e){gtag("event","demo-run",{event_category:"demo"}),showDemo()}),$("[data-link]").on("click",function(e){var t=$(e.target).data("link"),o=$(t).get(0);o&&o.scrollIntoView&&(e.preventDefault(),o.scrollIntoView({behavior:"smooth"}))}),$("#contact-form").on("submit",function(e){gtag("event","lead-submit",{event_category:"lead",event_label:"attempt"}),e.preventDefault();var t={website:$("#contact-website").val(),email:$("#contact-email").val(),name:$("#contact-name").val(),comment:$("#contact-comment").val()};jQuery.ajax({url:"https://admin.fpjs.io/leads",type:"post",dataType:"json",contentType:"application/json",data:JSON.stringify(t)}).catch(function(e){gtag("event","lead-submit",{event_category:"lead",event_label:"error"}),alert("Error occurred, contact us at: support@fpjs.io")}).then(function(e){var t=$("#contact-form-errors");if(e.errors&&0<e.errors.length){gtag("event","lead-submit",{event_category:"lead",event_label:"validation-fail"});for(var o="",a=0;a<e.errors.length;a++)o+="<div>"+e.errors[a]+"</div>";t.html(o),t.show()}else gtag("event","lead-submit",{event_category:"lead",event_label:"success"}),t.empty(),t.hide(),$("#contact-modal").modal("hide"),setTimeout(function(){alert("Thanks, we received your data")},300)})});
